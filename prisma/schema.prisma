// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  id        Int     @id @default(autoincrement())
  title     String
  content   String?
  published Boolean @default(false)
  author    User?   @relation(fields: [authorId], references: [id])
  authorId  Int?
}

model User {
  id        Int      @id @default(autoincrement())
  name      String?
  email     String?  @unique
  createdAt DateTime @default(now()) @map(name: "created_at")
  updatedAt DateTime @updatedAt @map(name: "updated_at")
  posts     Post[]

  @@map(name: "users")
}

// - Tables

model UserAuth {
  - user_auth
  - email
  - hashed_password
  - user_auth to users - 1:1
}

model User {
  - users
  - user_id
  - member_type
  - username
  - users to user_auth - 1:1
  - users to orders - 1:many
}

// aka course
model Product {
  - products
  - product_id
  - product_name
  - average_rating
  - price
  - date_last_updated
  - products to orders - many:1
  - products to orders - many:many
  - products to reviews - 1:many
}

model Reviews {
  - reviews
  - product_id
  - user_id - required to create a review
  - date_last_updated
  - body - required column
  - rating
  - is_helpful - no. of times thumbs-upped
  - reviews to users - many:1
  - reviews to products - many:1
}

model Orders {
  - orders
  - user_id

  - product_list
  - product_id

  - purchase_date_time
  - order_status

  - orders to users - many:1
  - orders to users - many:many

  - GROUP_BY query - sort by purchase date
}
